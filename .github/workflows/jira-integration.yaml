name: Run Jira Linter

on:
  pull_request:
    types: [opened, synchronize, reopened]
  workflow_call:

jobs:
  jira-lint:
    name: Run Jira Lint
    runs-on: ubuntu-latest
    steps:
      - uses: jira-tools/action-jira-linter@v1.0.1
        name: Jira Lint
        with:
          github-token: ${{ secrets.GITHUB_TOKEN }}
          jira-token: ${{ secrets.JIRA_TOKEN }}
          jira-base-url: https://amuniversal.atlassian.net
          skip-comments: true
          pr-threshold: 1000

      - name: Jira login
        uses: atlassian/gajira-login@v3
        env:
            JIRA_BASE_URL: https://amuniversal.atlassian.net
            JIRA_USER_EMAIL: ebronson@amuniversal.com
            JIRA_API_TOKEN: ${{ secrets.JIRA_API_TOKEN }}